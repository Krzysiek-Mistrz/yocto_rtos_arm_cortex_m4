# Zephyr-only extension layer for the mono project
#
# This layer exists to avoid breaking the i.MX6ULL Linux build:
# - meta-mono is included in both Linux and Zephyr builds
# - Some bbappends only make sense when meta-zephyr is in BBLAYERS
#   (e.g. zephyr-kernel-src.bbappend)
# Keeping those bbappends in this dedicated layer prevents BitBake from
# erroring out during parsing when building Linux-only configs.

BBPATH .= ":${LAYERDIR}"

# Only pick up the zephyr-kernel bbappends from this layer
BBFILES += "${LAYERDIR}/recipes-kernel/zephyr-kernel/*.bbappend"

BBFILE_COLLECTIONS += "meta-mono-zephyr"
BBFILE_PATTERN_meta-mono-zephyr = "^${LAYERDIR}/"
BBFILE_PRIORITY_meta-mono-zephyr = "11"

# This layer is only meaningful when meta-zephyr is present
LAYERDEPENDS_meta-mono-zephyr = "core zephyrcore"

LAYERSERIES_COMPAT_meta-mono-zephyr = "scarthgap"
